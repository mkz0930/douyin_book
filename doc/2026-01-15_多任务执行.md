# 多任务执行与 Todo 队列支持 (2026-01-15)

## 1. 功能概述
为了提升自动化处理效率，项目新增了对多任务队列的支持。Agent 现在可以按优先级顺序批量处理多个书籍文件。

## 2. 核心逻辑
### 2.1 任务优先级
程序 (`main.py`) 启动后，将按照以下顺序扫描并执行任务：
1.  **优先级 1 (标准队列)**: 扫描 `data/` 目录下的 `.txt` 文件。
2.  **优先级 2 (Todo 队列)**: 扫描 `data/todo/` 目录下的 `.txt` 文件。

### 2.2 归档策略 (Archiving Strategy)
为了区分不同来源的任务并保持工作区整洁，实现了差异化的归档逻辑：

| 任务来源 | 处理后源文件状态 | 内容归档位置 |
| :--- | :--- | :--- |
| `data/*.txt` | **被移动** (文件消失) | `data/history/<书名>.txt` |
| `data/todo/*.txt` | **被清空** (保留空文件) | `data/history/<书名>.txt` |

### 2.3 设计考量
-   **保留空文件**: `todo` 目录下的文件通常由外部工具或用户预置，保留空文件可以方便用户快速填入新内容，无需反复创建文件。
-   **统一归档**: 无论来源哪里，处理后的书籍内容都会以“书名”命名并保存在 `history` 目录，方便后续检索。

## 3. 使用方法
-   **单次运行**: 直接将书籍放入 `data/`，运行 `python main.py`。
-   **批量排队**: 将多个书籍文件放入 `data/todo/`，运行 `python main.py`，程序将自动依次处理。
-   **混合模式**: 同时放置文件，程序会先处理完 `data/` 下的，再处理 `data/todo/` 下的。

## 4. 代码变更
-   重构了 `main.py`，将核心处理逻辑提取为 `process_book` 函数。
-   增加了对 `data/todo/` 目录的扫描和处理循环。
